{"id":"S47","summaryText":"[SUMMARY S47] 165.3 KB | code | 268 lines\nFound 152 matches (showing first 100)\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S46.json:\n  Line 1: {\"id\":\"S46\",\"summaryText\":\"[SUMMARY S46] 30.4 KB | code | 738 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n→ Use /swarm retrieve S46 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n4: Provides endpoints for listing documents, uploading files, scanning directories,\\n5: and managing document processing status.\\n6: \\\"\\\"\\\"\\n7: import asyncio\\n8: import hashlib\\n9: import hmac\\n10: import logging\\n11: import os\\n12: import re\\n13: import sqlite3\\n14: from pathlib import Path\\n15: from typing import Any, ...\n→ Use /swarm retrieve S47 for full content","fullOutput":"Found 152 matches (showing first 100)\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S46.json:\n  Line 1: {\"id\":\"S46\",\"summaryText\":\"[SUMMARY S46] 30.4 KB | code | 738 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n→ Use /swarm retrieve S46 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n4: Provides endpoints for listing documents, uploading files, scanning directories,\\n5: and managing document processing status.\\n6: \\\"\\\"\\\"\\n7: import asyncio\\n8: import hashlib\\n9: import hmac\\n10: import logging\\n11: import os\\n12: import re\\n13: import sqlite3\\n14: from pathlib import Path\\n15: from typing import Any, Dict, List, Optional\\n16: \\n17: import aiofiles\\n18: from fastapi import APIRouter, Depends, HTTPException, Request, UploadFile, File, Query, Body\\n19: from fastapi.exceptions import RequestValidationError\\n20: from pydantic import BaseModel, ConfigDict, Field\\n21: \\n22: from app.config import settings, Settings\\n23: from app.services.document_processor import DocumentProcessor, DocumentProcessingError, DuplicateFileError\\n24: from app.services.vector_store import VectorStore\\n25: from app.services.embeddings import EmbeddingService\\n26: from app.services.secret_manager import SecretManager\\n27: from app.models.database import SQLiteConnectionPool\\n28: from app.api.deps import get_secret_manager, get_background_processor, get_vector_store, get_embedding_service, get_settings, get_db, get_db_pool\\n29: from app.security import csrf_protect, require_scope, require_auth\\n30: from app.limiter import limiter\\n31: from app.services.background_tasks import BackgroundProcessor\\n32: \\n33: \\n34: def secure_filename(filename: str) -> str:\\n35:     \\\"\\\"\\\"\\n36:     Sanitize a filename to prevent security issues.\\n37:     \\n38:     - Strips paths using os.path.basename\\n39:     - ...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S41.json:\n  Line 1: {\"id\":\"S41\",\"summaryText\":\"[SUMMARY S41] 26.3 KB | code | 697 lines\\n\\\"\\\"\\\"\\nLanceDB vector store service for semantic search.\\n\\\"\\\"\\\"\\nfrom pathlib import Path\\nfrom typing import Any, Dict, List, Optional\\n→ Use /swarm retrieve S41 for full content\",\"fullOutput\":\"\\\"\\\"\\\"\\nLanceDB vector store service for semantic search.\\n\\\"\\\"\\\"\\nfrom pathlib import Path\\nfrom typing import Any, Dict, List, Optional\\nimport lancedb\\nimport pyarrow as pa\\nimport numpy as np\\nimport logging\\n\\nfrom app.config import settings\\n\\nlogger = logging.getLogger(__name__)\\n\\nlogger = logging.getLogger(__name__)\\n\\n\\nclass VectorStoreError(Exception):\\n    \\\"\\\"\\\"Custom exception for vector store errors.\\\"\\\"\\\"\\n    pass\\n\\n\\nclass VectorStoreConnectionError(VectorStoreError):\\n    \\\"\\\"\\\"Exception raised when connection to LanceDB fails.\\\"\\\"\\\"\\n    pass\\n\\n\\nclass VectorStoreValidationError(VectorStoreError):\\n    \\\"\\\"\\\"Exception raised when record validation fails.\\\"\\\"\\\"\\n    pass\\n\\n\\nclass VectorStore:\\n    \\\"\\\"\\\"LanceDB-based vector store for document chunk embeddings.\\\"\\\"\\\"\\n    \\n    def __init__(self, db_path: Optional[Path] = None):\\n        \\\"\\\"\\\"\\n        Initialize the vector store.\\n        \\n        Args:\\n            db_path: Path to LanceDB database. Defaults to settings.lancedb_path.\\n        \\\"\\\"\\\"\\n        self.db_path = db_path or settings.lancedb_path\\n        self.db: Optional[lancedb.DBConnection] = None\\n        self.table: Optional[lancedb.table.Table] = None\\n        self._embedding_dim: Optional[int] = None\\n    \\n    def connect(self) -> \\\"VectorStore\\\":\\n        \\\"\\\"\\\"Connect to LanceDB.\\n        \\n        Raises:\\n            VectorStoreConnectionError: If connection to LanceDB fails.\\n        \\\"\\\"\\\"\\n        try:\\n            self.db = lancedb.connect(str(self.db_path))\\n        except Exception as e:\\n            raise VectorStoreConnectionError(f\\\"Failed to connect to LanceDB at {self.db_path}: {e}\\\") from e\\n        return self\\n    \\n    def init_table(self, em...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S40.json:\n  Line 1: {\"id\":\"S40\",\"summaryText\":\"[SUMMARY S40] 31.5 KB | code | 696 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S40 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 200  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.timeou...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S39.json:\n  Line 1: {\"id\":\"S39\",\"summaryText\":\"[SUMMARY S39] 29.7 KB | code | 701 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\vector_store.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: LanceDB vector store service for semantic search.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S39 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\vector_store.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: LanceDB vector store service for semantic search.\\n3: \\\"\\\"\\\"\\n4: from pathlib import Path\\n5: from typing import Any, Dict, List, Optional\\n6: import lancedb\\n7: import pyarrow as pa\\n8: import numpy as np\\n9: import logging\\n10: \\n11: from app.config import settings\\n12: \\n13: logger = logging.getLogger(__name__)\\n14: \\n15: logger = logging.getLogger(__name__)\\n16: \\n17: \\n18: class VectorStoreError(Exception):\\n19:     \\\"\\\"\\\"Custom exception for vector store errors.\\\"\\\"\\\"\\n20:     pass\\n21: \\n22: \\n23: class VectorStoreConnectionError(VectorStoreError):\\n24:     \\\"\\\"\\\"Exception raised when connection to LanceDB fails.\\\"\\\"\\\"\\n25:     pass\\n26: \\n27: \\n28: class VectorStoreValidationError(VectorStoreError):\\n29:     \\\"\\\"\\\"Exception raised when record validation fails.\\\"\\\"\\\"\\n30:     pass\\n31: \\n32: \\n33: class VectorStore:\\n34:     \\\"\\\"\\\"LanceDB-based vector store for document chunk embeddings.\\\"\\\"\\\"\\n35:     \\n36:     def __init__(self, db_path: Optional[Path] = None):\\n37:         \\\"\\\"\\\"\\n38:         Initialize the vector store.\\n39:         \\n40:         Args:\\n41:             db_path: Path to LanceDB database. Defaults to settings.lancedb_path.\\n42:         \\\"\\\"\\\"\\n43:         self.db_path = db_path or settings.lancedb_path\\n44:         self.db: Optional[lancedb.DBConnection] = None\\n45:         self.table: Optional[lancedb.table.Table] = None\\n46:         self._embedding_dim: Optional[int] = None\\n47:     \\n48:     def connect(self) -> \\\"VectorStore\\\":\\n49:         \\\"\\\"\\\"Connect to LanceDB.\\n50:         \\n51:         Raises:\\n52:           ...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S38.json:\n  Line 1: {\"id\":\"S38\",\"summaryText\":\"[SUMMARY S38] 29.7 KB | code | 701 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\vector_store.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: LanceDB vector store service for semantic search.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S38 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\vector_store.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: LanceDB vector store service for semantic search.\\n3: \\\"\\\"\\\"\\n4: from pathlib import Path\\n5: from typing import Any, Dict, List, Optional\\n6: import lancedb\\n7: import pyarrow as pa\\n8: import numpy as np\\n9: import logging\\n10: \\n11: from app.config import settings\\n12: \\n13: logger = logging.getLogger(__name__)\\n14: \\n15: logger = logging.getLogger(__name__)\\n16: \\n17: \\n18: class VectorStoreError(Exception):\\n19:     \\\"\\\"\\\"Custom exception for vector store errors.\\\"\\\"\\\"\\n20:     pass\\n21: \\n22: \\n23: class VectorStoreConnectionError(VectorStoreError):\\n24:     \\\"\\\"\\\"Exception raised when connection to LanceDB fails.\\\"\\\"\\\"\\n25:     pass\\n26: \\n27: \\n28: class VectorStoreValidationError(VectorStoreError):\\n29:     \\\"\\\"\\\"Exception raised when record validation fails.\\\"\\\"\\\"\\n30:     pass\\n31: \\n32: \\n33: class VectorStore:\\n34:     \\\"\\\"\\\"LanceDB-based vector store for document chunk embeddings.\\\"\\\"\\\"\\n35:     \\n36:     def __init__(self, db_path: Optional[Path] = None):\\n37:         \\\"\\\"\\\"\\n38:         Initialize the vector store.\\n39:         \\n40:         Args:\\n41:             db_path: Path to LanceDB database. Defaults to settings.lancedb_path.\\n42:         \\\"\\\"\\\"\\n43:         self.db_path = db_path or settings.lancedb_path\\n44:         self.db: Optional[lancedb.DBConnection] = None\\n45:         self.table: Optional[lancedb.table.Table] = None\\n46:         self._embedding_dim: Optional[int] = None\\n47:     \\n48:     def connect(self) -> \\\"VectorStore\\\":\\n49:         \\\"\\\"\\\"Connect to LanceDB.\\n50:         \\n51:         Raises:\\n52:           ...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S37.json:\n  Line 1: {\"id\":\"S37\",\"summaryText\":\"[SUMMARY S37] 31.5 KB | code | 696 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S37 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 200  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.timeou...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\context.md:\n  Line 35: | 2026-02-24 | Single-input overflow uses split+mean-pool fallback | Avoid hard failures when one chunk exceeds llama.cpp physical batch token budget | Applied |\n  Line 66: | backend/app/services/rag_engine.py | RAG orchestration | 253 |\n  Line 88: - rag_engine.py:40-41 — HIGH: redundant constructor params\n  Line 89: - rag_engine.py:144 — HIGH: test code in production\n  Line 105: - useVaultStore.ts:6-8 — LOW: unvalidated localStorage\n  Line 146: | retrieve_summary | 14 | 14 | 0 | 2ms |\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S36.json:\n  Line 1: {\"id\":\"S36\",\"summaryText\":\"[SUMMARY S36] 29.7 KB | code | 701 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\vector_store.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: LanceDB vector store service for semantic search.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S36 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\vector_store.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: LanceDB vector store service for semantic search.\\n3: \\\"\\\"\\\"\\n4: from pathlib import Path\\n5: from typing import Any, Dict, List, Optional\\n6: import lancedb\\n7: import pyarrow as pa\\n8: import numpy as np\\n9: import logging\\n10: \\n11: from app.config import settings\\n12: \\n13: logger = logging.getLogger(__name__)\\n14: \\n15: logger = logging.getLogger(__name__)\\n16: \\n17: \\n18: class VectorStoreError(Exception):\\n19:     \\\"\\\"\\\"Custom exception for vector store errors.\\\"\\\"\\\"\\n20:     pass\\n21: \\n22: \\n23: class VectorStoreConnectionError(VectorStoreError):\\n24:     \\\"\\\"\\\"Exception raised when connection to LanceDB fails.\\\"\\\"\\\"\\n25:     pass\\n26: \\n27: \\n28: class VectorStoreValidationError(VectorStoreError):\\n29:     \\\"\\\"\\\"Exception raised when record validation fails.\\\"\\\"\\\"\\n30:     pass\\n31: \\n32: \\n33: class VectorStore:\\n34:     \\\"\\\"\\\"LanceDB-based vector store for document chunk embeddings.\\\"\\\"\\\"\\n35:     \\n36:     def __init__(self, db_path: Optional[Path] = None):\\n37:         \\\"\\\"\\\"\\n38:         Initialize the vector store.\\n39:         \\n40:         Args:\\n41:             db_path: Path to LanceDB database. Defaults to settings.lancedb_path.\\n42:         \\\"\\\"\\\"\\n43:         self.db_path = db_path or settings.lancedb_path\\n44:         self.db: Optional[lancedb.DBConnection] = None\\n45:         self.table: Optional[lancedb.table.Table] = None\\n46:         self._embedding_dim: Optional[int] = None\\n47:     \\n48:     def connect(self) -> \\\"VectorStore\\\":\\n49:         \\\"\\\"\\\"Connect to LanceDB.\\n50:         \\n51:         Raises:\\n52:           ...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S14.json:\n  Line 1: {\"id\":\"S14\",\"summaryText\":\"[SUMMARY S14] 31.1 KB | code | 682 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo, useRef } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S14 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo, useRef } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/E...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S13.json:\n  Line 1: {\"id\":\"S13\",\"summaryText\":\"[SUMMARY S13] 31.1 KB | code | 682 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo, useRef } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S13 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo, useRef } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/E...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S12.json:\n  Line 1: {\"id\":\"S12\",\"summaryText\":\"[SUMMARY S12] 31.1 KB | code | 682 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo, useRef } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S12 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo, useRef } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/E...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S11.json:\n  Line 1: {\"id\":\"S11\",\"summaryText\":\"[SUMMARY S11] 31.1 KB | code | 682 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo, useRef } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S11 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo, useRef } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/E...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S10.json:\n  Line 1: {\"id\":\"S10\",\"summaryText\":\"[SUMMARY S10] 30.8 KB | code | 674 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo, useRef } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S10 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo, useRef } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/E...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S9.json:\n  Line 1: {\"id\":\"S9\",\"summaryText\":\"[SUMMARY S9] 30.8 KB | code | 674 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo, useRef } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S9 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo, useRef } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/Empt...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S8.json:\n  Line 1: {\"id\":\"S8\",\"summaryText\":\"[SUMMARY S8] 27.5 KB | code | 670 lines\\nimport { useState, useEffect, useCallback, useMemo, useRef } from \\\"react\\\";\\nimport { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\nimport { toast } from \\\"sonner\\\";\\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\nimport { Button } from \\\"@/components/ui/button\\\";\\n→ Use /swarm retrieve S8 for full content\",\"fullOutput\":\"import { useState, useEffect, useCallback, useMemo, useRef } from \\\"react\\\";\\nimport { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\nimport { toast } from \\\"sonner\\\";\\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\nimport { Button } from \\\"@/components/ui/button\\\";\\nimport { Input } from \\\"@/components/ui/input\\\";\\nimport { Badge } from \\\"@/components/ui/badge\\\";\\nimport { Progress } from \\\"@/components/ui/progress\\\";\\nimport { Skeleton } from \\\"@/components/ui/skeleton\\\";\\nimport { Checkbox } from \\\"@/components/ui/checkbox\\\";\\nimport { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\nimport { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\nimport { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\nimport { useDebounce } from \\\"@/hooks/useDebounce\\\";\\nimport { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\nimport { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\nimport { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\nimport { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\nimport { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\nimport { EmptyState } from \\\"@/components/shared/EmptyState\\\";\\n\\nconst MAX_FILE_SIZE = 50 * 1024 * 1024; // 50MB\\n\\nexport default function DocumentsPage() {\\n  const [documents, setDocuments...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S7.json:\n  Line 1: {\"id\":\"S7\",\"summaryText\":\"[SUMMARY S7] 30.8 KB | code | 674 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo, useRef } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S7 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo, useRef } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/Empt...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S6.json:\n  Line 1: {\"id\":\"S6\",\"summaryText\":\"[SUMMARY S6] 30.8 KB | code | 674 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo, useRef } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S6 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo, useRef } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/Empt...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S5.json:\n  Line 1: {\"id\":\"S5\",\"summaryText\":\"[SUMMARY S5] 29.0 KB | code | 638 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S5 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/EmptyState\\\";\\n21: \\...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S4.json:\n  Line 1: {\"id\":\"S4\",\"summaryText\":\"[SUMMARY S4] 29.0 KB | code | 638 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S4 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/EmptyState\\\";\\n21: \\...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S3.json:\n  Line 1: {\"id\":\"S3\",\"summaryText\":\"[SUMMARY S3] 29.0 KB | code | 638 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S3 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/EmptyState\\\";\\n21: \\...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\plan.md:\n  Line 44: - [ ] 6.1.1: Add new character-based settings (chunk_size_chars, chunk_overlap_chars) [SMALL]\n  Line 45: - [ ] 6.1.2: Add retrieval_top_k to unify max_context_chunks/vector_top_k [SMALL]\n  Line 46: - [ ] 6.1.3: Add settings migration layer (legacy chunk_size → chunk_size_chars*4) [SMALL]\n  Line 47: - [ ] 6.1.4: Remove *4 scaling in chunking.py [SMALL]\n  Line 48: - [ ] 6.1.5: Update DocumentProcessor to store chunk metadata (file_id, chunk_index, chunk_uid) [SMALL]\n  Line 52: - [ ] 6.2.1: Fix vector_store to expose _distance field from LanceDB [SMALL]\n  Line 53: - [ ] 6.2.2: Fix RAG engine threshold logic (use _distance not score) [MEDIUM]\n  Line 54: - [ ] 6.2.3: Change threshold to max_distance_threshold (lower=better) [SMALL]\n  Line 55: - [ ] 6.2.4: Add per-query logging (initial_hits, filtered_count, distance stats) [SMALL]\n  Line 60: - [ ] 6.3.3: Implement adjacent-chunk windowing (fetch N±1 chunks) [MEDIUM]\n  Line 66:   - acceptance: if a single input still overflows, raise actionable EmbeddingError (reduce chunk_size_chars or increase server batch)\n  Line 93: - [ ] 6.5.2: Add unit tests for threshold filtering [SMALL]\n  Line 99:   - acceptance: drag handle on right edge of Filename `<th>` changes column width\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S2.json:\n  Line 1: {\"id\":\"S2\",\"summaryText\":\"[SUMMARY S2] 29.0 KB | code | 638 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S2 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/EmptyState\\\";\\n21: \\...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S1.json:\n  Line 1: {\"id\":\"S1\",\"summaryText\":\"[SUMMARY S1] 29.0 KB | code | 638 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S1 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/EmptyState\\\";\\n21: \\...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S835.json:\n  Line 1: {\"id\":\"S835\",\"summaryText\":\"[SUMMARY S835] 30.4 KB | code | 738 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n→ Use /swarm retrieve S835 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n4: Provides endpoints for listing documents, uploading files, scanning directories,\\n5: and managing document processing status.\\n6: \\\"\\\"\\\"\\n7: import asyncio\\n8: import hashlib\\n9: import hmac\\n10: import logging\\n11: import os\\n12: import re\\n13: import sqlite3\\n14: from pathlib import Path\\n15: from typing import Any, Dict, List, Optional\\n16: \\n17: import aiofiles\\n18: from fastapi import APIRouter, Depends, HTTPException, Request, UploadFile, File, Query, Body\\n19: from fastapi.exceptions import RequestValidationError\\n20: from pydantic import BaseModel, ConfigDict, Field\\n21: \\n22: from app.config import settings, Settings\\n23: from app.services.document_processor import DocumentProcessor, DocumentProcessingError, DuplicateFileError\\n24: from app.services.vector_store import VectorStore\\n25: from app.services.embeddings import EmbeddingService\\n26: from app.services.secret_manager import SecretManager\\n27: from app.models.database import SQLiteConnectionPool\\n28: from app.api.deps import get_secret_manager, get_background_processor, get_vector_store, get_embedding_service, get_settings, get_db, get_db_pool\\n29: from app.security import csrf_protect, require_scope, require_auth\\n30: from app.limiter import limiter\\n31: from app.services.background_tasks import BackgroundProcessor\\n32: \\n33: \\n34: def secure_filename(filename: str) -> str:\\n35:     \\\"\\\"\\\"\\n36:     Sanitize a filename to prevent security issues.\\n37:     \\n38:     - Strips paths using os.path.basename\\n39:    ...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S834.json:\n  Line 1: {\"id\":\"S834\",\"summaryText\":\"[SUMMARY S834] 30.4 KB | code | 738 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n→ Use /swarm retrieve S834 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n4: Provides endpoints for listing documents, uploading files, scanning directories,\\n5: and managing document processing status.\\n6: \\\"\\\"\\\"\\n7: import asyncio\\n8: import hashlib\\n9: import hmac\\n10: import logging\\n11: import os\\n12: import re\\n13: import sqlite3\\n14: from pathlib import Path\\n15: from typing import Any, Dict, List, Optional\\n16: \\n17: import aiofiles\\n18: from fastapi import APIRouter, Depends, HTTPException, Request, UploadFile, File, Query, Body\\n19: from fastapi.exceptions import RequestValidationError\\n20: from pydantic import BaseModel, ConfigDict, Field\\n21: \\n22: from app.config import settings, Settings\\n23: from app.services.document_processor import DocumentProcessor, DocumentProcessingError, DuplicateFileError\\n24: from app.services.vector_store import VectorStore\\n25: from app.services.embeddings import EmbeddingService\\n26: from app.services.secret_manager import SecretManager\\n27: from app.models.database import SQLiteConnectionPool\\n28: from app.api.deps import get_secret_manager, get_background_processor, get_vector_store, get_embedding_service, get_settings, get_db, get_db_pool\\n29: from app.security import csrf_protect, require_scope, require_auth\\n30: from app.limiter import limiter\\n31: from app.services.background_tasks import BackgroundProcessor\\n32: \\n33: \\n34: def secure_filename(filename: str) -> str:\\n35:     \\\"\\\"\\\"\\n36:     Sanitize a filename to prevent security issues.\\n37:     \\n38:     - Strips paths using os.path.basename\\n39:    ...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S788.json:\n  Line 1: {\"id\":\"S788\",\"summaryText\":\"[SUMMARY S788] 51.7 KB | code | 146 lines\\nFound 72 matches\\nC:\\\\opencode\\\\RAGAPPv2\\\\.swarm\\\\summaries\\\\S787.json:\\n  Line 1: {\\\"id\\\":\\\"S787\\\",\\\"summaryText\\\":\\\"[SUMMARY S787] 29.0 KB | code | 638 lines\\\\n<path>C:\\\\\\\\opencode\\\\\\\\RAGAPPv2\\\\\\\\frontend\\\\\\\\src\\\\\\\\pages\\\\\\\\DocumentsPage.tsx</path>\\\\n<type>file</type>\\\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\\\\\"react\\\\\\\";\\\\n2: import { useDropzone, type FileRejection } from \\\\\\\"react-dropzone\\\\\\\";\\\\n3: import { toast } from \\\\\\\"sonner\\\\\\\";\\\\n→ Use /swarm retrieve S787 for full content\\\",\\\"fullOutput\\\":\\\"<path>C:\\\\\\\\opencode\\\\\\\\RAGAPPv2\\\\\\\\frontend\\\\\\\\src\\\\\\\\pages\\\\\\\\DocumentsPage.tsx</path>\\\\n<type>file</type>\\\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\\\\\"react\\\\\\\";\\\\n2: import { useDropzone, type FileRejection } from \\\\\\\"react-dropzone\\\\\\\";\\\\n3: import { toast } from \\\\\\\"sonner\\\\\\\";\\\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\\\\\"@/components/ui/card\\\\\\\";\\\\n5: import { Button } fr...\\n→ Use /swarm retrieve S788 for full content\",\"fullOutput\":\"Found 72 matches\\nC:\\\\opencode\\\\RAGAPPv2\\\\.swarm\\\\summaries\\\\S787.json:\\n  Line 1: {\\\"id\\\":\\\"S787\\\",\\\"summaryText\\\":\\\"[SUMMARY S787] 29.0 KB | code | 638 lines\\\\n<path>C:\\\\\\\\opencode\\\\\\\\RAGAPPv2\\\\\\\\frontend\\\\\\\\src\\\\\\\\pages\\\\\\\\DocumentsPage.tsx</path>\\\\n<type>file</type>\\\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\\\\\"react\\\\\\\";\\\\n2: import { useDropzone, type FileRejection } from \\\\\\\"react-dropzone\\\\\\\";\\\\n3: import { toast } from \\\\\\\"sonner\\\\\\\";\\\\n→ Use /swarm retrieve S787 for full content\\\",\\\"fullOutput\\\":\\\"<path>C:\\\\\\\\opencode\\\\\\\\RAGAPPv2\\\\\\\\frontend\\\\\\\\src\\\\\\\\pages\\\\\\\\DocumentsPage.tsx</path>\\\\n<type>file</type>\\\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\\\\\"react\\\\\\\";\\\\n2: import { useDropzone, type FileRejection } from \\\\\\\"react-dropzone\\\\\\\";\\\\n3: import { toast } from \\\\\\\"sonner\\\\\\\";\\\\n4: import {...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S787.json:\n  Line 1: {\"id\":\"S787\",\"summaryText\":\"[SUMMARY S787] 29.0 KB | code | 638 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S787 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/EmptyState\\\";\\...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S786.json:\n  Line 1: {\"id\":\"S786\",\"summaryText\":\"[SUMMARY S786] 30.4 KB | code | 738 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n→ Use /swarm retrieve S786 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n4: Provides endpoints for listing documents, uploading files, scanning directories,\\n5: and managing document processing status.\\n6: \\\"\\\"\\\"\\n7: import asyncio\\n8: import hashlib\\n9: import hmac\\n10: import logging\\n11: import os\\n12: import re\\n13: import sqlite3\\n14: from pathlib import Path\\n15: from typing import Any, Dict, List, Optional\\n16: \\n17: import aiofiles\\n18: from fastapi import APIRouter, Depends, HTTPException, Request, UploadFile, File, Query, Body\\n19: from fastapi.exceptions import RequestValidationError\\n20: from pydantic import BaseModel, ConfigDict, Field\\n21: \\n22: from app.config import settings, Settings\\n23: from app.services.document_processor import DocumentProcessor, DocumentProcessingError, DuplicateFileError\\n24: from app.services.vector_store import VectorStore\\n25: from app.services.embeddings import EmbeddingService\\n26: from app.services.secret_manager import SecretManager\\n27: from app.models.database import SQLiteConnectionPool\\n28: from app.api.deps import get_secret_manager, get_background_processor, get_vector_store, get_embedding_service, get_settings, get_db, get_db_pool\\n29: from app.security import csrf_protect, require_scope, require_auth\\n30: from app.limiter import limiter\\n31: from app.services.background_tasks import BackgroundProcessor\\n32: \\n33: \\n34: def secure_filename(filename: str) -> str:\\n35:     \\\"\\\"\\\"\\n36:     Sanitize a filename to prevent security issues.\\n37:     \\n38:     - Strips paths using os.path.basename\\n39:    ...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S785.json:\n  Line 1: {\"id\":\"S785\",\"summaryText\":\"[SUMMARY S785] 29.0 KB | code | 638 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S785 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/EmptyState\\\";\\...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S784.json:\n  Line 1: {\"id\":\"S784\",\"summaryText\":\"[SUMMARY S784] 30.4 KB | code | 738 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n→ Use /swarm retrieve S784 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n4: Provides endpoints for listing documents, uploading files, scanning directories,\\n5: and managing document processing status.\\n6: \\\"\\\"\\\"\\n7: import asyncio\\n8: import hashlib\\n9: import hmac\\n10: import logging\\n11: import os\\n12: import re\\n13: import sqlite3\\n14: from pathlib import Path\\n15: from typing import Any, Dict, List, Optional\\n16: \\n17: import aiofiles\\n18: from fastapi import APIRouter, Depends, HTTPException, Request, UploadFile, File, Query, Body\\n19: from fastapi.exceptions import RequestValidationError\\n20: from pydantic import BaseModel, ConfigDict, Field\\n21: \\n22: from app.config import settings, Settings\\n23: from app.services.document_processor import DocumentProcessor, DocumentProcessingError, DuplicateFileError\\n24: from app.services.vector_store import VectorStore\\n25: from app.services.embeddings import EmbeddingService\\n26: from app.services.secret_manager import SecretManager\\n27: from app.models.database import SQLiteConnectionPool\\n28: from app.api.deps import get_secret_manager, get_background_processor, get_vector_store, get_embedding_service, get_settings, get_db, get_db_pool\\n29: from app.security import csrf_protect, require_scope, require_auth\\n30: from app.limiter import limiter\\n31: from app.services.background_tasks import BackgroundProcessor\\n32: \\n33: \\n34: def secure_filename(filename: str) -> str:\\n35:     \\\"\\\"\\\"\\n36:     Sanitize a filename to prevent security issues.\\n37:     \\n38:     - Strips paths using os.path.basename\\n39:    ...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S781.json:\n  Line 1: {\"id\":\"S781\",\"summaryText\":\"[SUMMARY S781] 29.0 KB | code | 638 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S781 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/EmptyState\\\";\\...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S780.json:\n  Line 1: {\"id\":\"S780\",\"summaryText\":\"[SUMMARY S780] 30.4 KB | code | 738 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n→ Use /swarm retrieve S780 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n4: Provides endpoints for listing documents, uploading files, scanning directories,\\n5: and managing document processing status.\\n6: \\\"\\\"\\\"\\n7: import asyncio\\n8: import hashlib\\n9: import hmac\\n10: import logging\\n11: import os\\n12: import re\\n13: import sqlite3\\n14: from pathlib import Path\\n15: from typing import Any, Dict, List, Optional\\n16: \\n17: import aiofiles\\n18: from fastapi import APIRouter, Depends, HTTPException, Request, UploadFile, File, Query, Body\\n19: from fastapi.exceptions import RequestValidationError\\n20: from pydantic import BaseModel, ConfigDict, Field\\n21: \\n22: from app.config import settings, Settings\\n23: from app.services.document_processor import DocumentProcessor, DocumentProcessingError, DuplicateFileError\\n24: from app.services.vector_store import VectorStore\\n25: from app.services.embeddings import EmbeddingService\\n26: from app.services.secret_manager import SecretManager\\n27: from app.models.database import SQLiteConnectionPool\\n28: from app.api.deps import get_secret_manager, get_background_processor, get_vector_store, get_embedding_service, get_settings, get_db, get_db_pool\\n29: from app.security import csrf_protect, require_scope, require_auth\\n30: from app.limiter import limiter\\n31: from app.services.background_tasks import BackgroundProcessor\\n32: \\n33: \\n34: def secure_filename(filename: str) -> str:\\n35:     \\\"\\\"\\\"\\n36:     Sanitize a filename to prevent security issues.\\n37:     \\n38:     - Strips paths using os.path.basename\\n39:    ...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S779.json:\n  Line 1: {\"id\":\"S779\",\"summaryText\":\"[SUMMARY S779] 29.0 KB | code | 638 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S779 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/EmptyState\\\";\\...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S778.json:\n  Line 1: {\"id\":\"S778\",\"summaryText\":\"[SUMMARY S778] 30.4 KB | code | 738 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n→ Use /swarm retrieve S778 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n4: Provides endpoints for listing documents, uploading files, scanning directories,\\n5: and managing document processing status.\\n6: \\\"\\\"\\\"\\n7: import asyncio\\n8: import hashlib\\n9: import hmac\\n10: import logging\\n11: import os\\n12: import re\\n13: import sqlite3\\n14: from pathlib import Path\\n15: from typing import Any, Dict, List, Optional\\n16: \\n17: import aiofiles\\n18: from fastapi import APIRouter, Depends, HTTPException, Request, UploadFile, File, Query, Body\\n19: from fastapi.exceptions import RequestValidationError\\n20: from pydantic import BaseModel, ConfigDict, Field\\n21: \\n22: from app.config import settings, Settings\\n23: from app.services.document_processor import DocumentProcessor, DocumentProcessingError, DuplicateFileError\\n24: from app.services.vector_store import VectorStore\\n25: from app.services.embeddings import EmbeddingService\\n26: from app.services.secret_manager import SecretManager\\n27: from app.models.database import SQLiteConnectionPool\\n28: from app.api.deps import get_secret_manager, get_background_processor, get_vector_store, get_embedding_service, get_settings, get_db, get_db_pool\\n29: from app.security import csrf_protect, require_scope, require_auth\\n30: from app.limiter import limiter\\n31: from app.services.background_tasks import BackgroundProcessor\\n32: \\n33: \\n34: def secure_filename(filename: str) -> str:\\n35:     \\\"\\\"\\\"\\n36:     Sanitize a filename to prevent security issues.\\n37:     \\n38:     - Strips paths using os.path.basename\\n39:    ...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S769.json:\n  Line 1: {\"id\":\"S769\",\"summaryText\":\"[SUMMARY S769] 29.0 KB | code | 638 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S769 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/EmptyState\\\";\\...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S768.json:\n  Line 1: {\"id\":\"S768\",\"summaryText\":\"[SUMMARY S768] 25.8 KB | code | 634 lines\\nimport { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\nimport { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\nimport { toast } from \\\"sonner\\\";\\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\nimport { Button } from \\\"@/components/ui/button\\\";\\n→ Use /swarm retrieve S768 for full content\",\"fullOutput\":\"import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\nimport { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\nimport { toast } from \\\"sonner\\\";\\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\nimport { Button } from \\\"@/components/ui/button\\\";\\nimport { Input } from \\\"@/components/ui/input\\\";\\nimport { Badge } from \\\"@/components/ui/badge\\\";\\nimport { Progress } from \\\"@/components/ui/progress\\\";\\nimport { Skeleton } from \\\"@/components/ui/skeleton\\\";\\nimport { Checkbox } from \\\"@/components/ui/checkbox\\\";\\nimport { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\nimport { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\nimport { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\nimport { useDebounce } from \\\"@/hooks/useDebounce\\\";\\nimport { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\nimport { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\nimport { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\nimport { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\nimport { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\nimport { EmptyState } from \\\"@/components/shared/EmptyState\\\";\\n\\nconst MAX_FILE_SIZE = 50 * 1024 * 1024; // 50MB\\n\\nexport default function DocumentsPage() {\\n  const [documents, setDocuments] = useSta...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S767.json:\n  Line 1: {\"id\":\"S767\",\"summaryText\":\"[SUMMARY S767] 29.0 KB | code | 638 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S767 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/EmptyState\\\";\\...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S766.json:\n  Line 1: {\"id\":\"S766\",\"summaryText\":\"[SUMMARY S766] 29.0 KB | code | 638 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S766 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/EmptyState\\\";\\...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S765.json:\n  Line 1: {\"id\":\"S765\",\"summaryText\":\"[SUMMARY S765] 29.0 KB | code | 638 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S765 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/EmptyState\\\";\\...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S764.json:\n  Line 1: {\"id\":\"S764\",\"summaryText\":\"[SUMMARY S764] 25.8 KB | code | 634 lines\\nimport { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\nimport { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\nimport { toast } from \\\"sonner\\\";\\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\nimport { Button } from \\\"@/components/ui/button\\\";\\n→ Use /swarm retrieve S764 for full content\",\"fullOutput\":\"import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\nimport { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\nimport { toast } from \\\"sonner\\\";\\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\nimport { Button } from \\\"@/components/ui/button\\\";\\nimport { Input } from \\\"@/components/ui/input\\\";\\nimport { Badge } from \\\"@/components/ui/badge\\\";\\nimport { Progress } from \\\"@/components/ui/progress\\\";\\nimport { Skeleton } from \\\"@/components/ui/skeleton\\\";\\nimport { Checkbox } from \\\"@/components/ui/checkbox\\\";\\nimport { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\nimport { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\nimport { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\nimport { useDebounce } from \\\"@/hooks/useDebounce\\\";\\nimport { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\nimport { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\nimport { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\nimport { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\nimport { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\nimport { EmptyState } from \\\"@/components/shared/EmptyState\\\";\\n\\nconst MAX_FILE_SIZE = 50 * 1024 * 1024; // 50MB\\n\\nexport default function DocumentsPage() {\\n  const [documents, setDocuments] = useSta...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S763.json:\n  Line 1: {\"id\":\"S763\",\"summaryText\":\"[SUMMARY S763] 29.0 KB | code | 638 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S763 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/EmptyState\\\";\\...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S762.json:\n  Line 1: {\"id\":\"S762\",\"summaryText\":\"[SUMMARY S762] 29.0 KB | code | 638 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n→ Use /swarm retrieve S762 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\DocumentsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\n2: import { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\n3: import { toast } from \\\"sonner\\\";\\n4: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n5: import { Button } from \\\"@/components/ui/button\\\";\\n6: import { Input } from \\\"@/components/ui/input\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Progress } from \\\"@/components/ui/progress\\\";\\n9: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n10: import { Checkbox } from \\\"@/components/ui/checkbox\\\";\\n11: import { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\n12: import { listDocuments, scanDocuments, deleteDocument, deleteDocuments, deleteAllDocumentsInVault, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\n13: import { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\n14: import { useDebounce } from \\\"@/hooks/useDebounce\\\";\\n15: import { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\n16: import { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\n17: import { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\n18: import { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\n19: import { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\n20: import { EmptyState } from \\\"@/components/shared/EmptyState\\\";\\...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S761.json:\n  Line 1: {\"id\":\"S761\",\"summaryText\":\"[SUMMARY S761] 30.4 KB | code | 681 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S761 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 200  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.tim...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S760.json:\n  Line 1: {\"id\":\"S760\",\"summaryText\":\"[SUMMARY S760] 30.4 KB | code | 681 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S760 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 200  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.tim...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S739.json:\n  Line 1: {\"id\":\"S739\",\"summaryText\":\"[SUMMARY S739] 25.8 KB | code | 623 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n→ Use /swarm retrieve S739 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n4: Provides endpoints for listing documents, uploading files, scanning directories,\\n5: and managing document processing status.\\n6: \\\"\\\"\\\"\\n7: import asyncio\\n8: import hashlib\\n9: import hmac\\n10: import logging\\n11: import os\\n12: import re\\n13: import sqlite3\\n14: from pathlib import Path\\n15: from typing import Any, Dict, List, Optional\\n16: \\n17: import aiofiles\\n18: from fastapi import APIRouter, Depends, HTTPException, Request, UploadFile, File, Query\\n19: from fastapi.exceptions import RequestValidationError\\n20: from pydantic import BaseModel, ConfigDict, Field\\n21: \\n22: from app.config import settings, Settings\\n23: from app.services.document_processor import DocumentProcessor, DocumentProcessingError, DuplicateFileError\\n24: from app.services.vector_store import VectorStore\\n25: from app.services.embeddings import EmbeddingService\\n26: from app.services.secret_manager import SecretManager\\n27: from app.models.database import SQLiteConnectionPool\\n28: from app.api.deps import get_secret_manager, get_background_processor, get_vector_store, get_embedding_service, get_settings, get_db, get_db_pool\\n29: from app.security import csrf_protect, require_scope, require_auth\\n30: from app.limiter import limiter\\n31: from app.services.background_tasks import BackgroundProcessor\\n32: \\n33: \\n34: def secure_filename(filename: str) -> str:\\n35:     \\\"\\\"\\\"\\n36:     Sanitize a filename to prevent security issues.\\n37:     \\n38:     - Strips paths using os.path.basename\\n39:     - Rem...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S738.json:\n  Line 1: {\"id\":\"S738\",\"summaryText\":\"[SUMMARY S738] 25.8 KB | code | 623 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n→ Use /swarm retrieve S738 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n4: Provides endpoints for listing documents, uploading files, scanning directories,\\n5: and managing document processing status.\\n6: \\\"\\\"\\\"\\n7: import asyncio\\n8: import hashlib\\n9: import hmac\\n10: import logging\\n11: import os\\n12: import re\\n13: import sqlite3\\n14: from pathlib import Path\\n15: from typing import Any, Dict, List, Optional\\n16: \\n17: import aiofiles\\n18: from fastapi import APIRouter, Depends, HTTPException, Request, UploadFile, File, Query\\n19: from fastapi.exceptions import RequestValidationError\\n20: from pydantic import BaseModel, ConfigDict, Field\\n21: \\n22: from app.config import settings, Settings\\n23: from app.services.document_processor import DocumentProcessor, DocumentProcessingError, DuplicateFileError\\n24: from app.services.vector_store import VectorStore\\n25: from app.services.embeddings import EmbeddingService\\n26: from app.services.secret_manager import SecretManager\\n27: from app.models.database import SQLiteConnectionPool\\n28: from app.api.deps import get_secret_manager, get_background_processor, get_vector_store, get_embedding_service, get_settings, get_db, get_db_pool\\n29: from app.security import csrf_protect, require_scope, require_auth\\n30: from app.limiter import limiter\\n31: from app.services.background_tasks import BackgroundProcessor\\n32: \\n33: \\n34: def secure_filename(filename: str) -> str:\\n35:     \\\"\\\"\\\"\\n36:     Sanitize a filename to prevent security issues.\\n37:     \\n38:     - Strips paths using os.path.basename\\n39:     - Rem...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S736.json:\n  Line 1: {\"id\":\"S736\",\"summaryText\":\"[SUMMARY S736] 25.0 KB | code | 610 lines\\ntask_id: ses_3700d418dffeW9TOZ0eoF34oLI (for resuming to continue this task if needed)\\n<task_result>\\n```tsx\\n// /c/opencode/RAGAPPv2/frontend/src/pages/DocumentsPage.tsx\\n// DESIGN SPEC — generated by Designer agent\\n→ Use /swarm retrieve S736 for full content\",\"fullOutput\":\"task_id: ses_3700d418dffeW9TOZ0eoF34oLI (for resuming to continue this task if needed)\\n\\n<task_result>\\n```tsx\\n// /c/opencode/RAGAPPv2/frontend/src/pages/DocumentsPage.tsx\\n// DESIGN SPEC — generated by Designer agent\\n// Coder: implement TODO items, do not change component structure or accessibility attributes\\n\\nimport { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\nimport { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\nimport { toast } from \\\"sonner\\\";\\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\nimport { Button } from \\\"@/components/ui/button\\\";\\nimport { Input } from \\\"@/components/ui/input\\\";\\nimport { Badge } from \\\"@/components/ui/badge\\\";\\nimport { Progress } from \\\"@/components/ui/progress\\\";\\nimport { Skeleton } from \\\"@/components/ui/skeleton\\\";\\nimport { Checkbox } from \\\"@/components/ui/checkbox\\\";\\nimport { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\nimport { listDocuments, scanDocuments, deleteDocument, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\nimport { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\nimport { useDebounce } from \\\"@/hooks/useDebounce\\\";\\nimport { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\nimport { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\nimport { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\nimport { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\nimport { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\nimport { EmptyState } from \\\"@/compo...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S733.json:\n  Line 1: {\"id\":\"S733\",\"summaryText\":\"[SUMMARY S733] 25.0 KB | code | 610 lines\\ntask_id: ses_3700d418dffeW9TOZ0eoF34oLI (for resuming to continue this task if needed)\\n<task_result>\\n```tsx\\n// /c/opencode/RAGAPPv2/frontend/src/pages/DocumentsPage.tsx\\n// DESIGN SPEC — generated by Designer agent\\n→ Use /swarm retrieve S733 for full content\",\"fullOutput\":\"task_id: ses_3700d418dffeW9TOZ0eoF34oLI (for resuming to continue this task if needed)\\n\\n<task_result>\\n```tsx\\n// /c/opencode/RAGAPPv2/frontend/src/pages/DocumentsPage.tsx\\n// DESIGN SPEC — generated by Designer agent\\n// Coder: implement TODO items, do not change component structure or accessibility attributes\\n\\nimport { useState, useEffect, useCallback, useMemo } from \\\"react\\\";\\nimport { useDropzone, type FileRejection } from \\\"react-dropzone\\\";\\nimport { toast } from \\\"sonner\\\";\\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\nimport { Button } from \\\"@/components/ui/button\\\";\\nimport { Input } from \\\"@/components/ui/input\\\";\\nimport { Badge } from \\\"@/components/ui/badge\\\";\\nimport { Progress } from \\\"@/components/ui/progress\\\";\\nimport { Skeleton } from \\\"@/components/ui/skeleton\\\";\\nimport { Checkbox } from \\\"@/components/ui/checkbox\\\";\\nimport { FileText, Upload, Search, Trash2, ScanLine, AlertCircle, Loader2, X, RotateCcw, Trash } from \\\"lucide-react\\\";\\nimport { listDocuments, scanDocuments, deleteDocument, getDocumentStats, type Document, type DocumentStatsResponse } from \\\"@/lib/api\\\";\\nimport { formatFileSize, formatDate } from \\\"@/lib/formatters\\\";\\nimport { useDebounce } from \\\"@/hooks/useDebounce\\\";\\nimport { useVaultStore } from \\\"@/stores/useVaultStore\\\";\\nimport { useUploadStore } from \\\"@/stores/useUploadStore\\\";\\nimport { VaultSelector } from \\\"@/components/vault/VaultSelector\\\";\\nimport { StatusBadge } from \\\"@/components/shared/StatusBadge\\\";\\nimport { DocumentCard } from \\\"@/components/shared/DocumentCard\\\";\\nimport { EmptyState } from \\\"@/compo...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S564.json:\n  Line 1: {\"id\":\"S564\",\"summaryText\":\"[SUMMARY S564] 30.3 KB | code | 678 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S564 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 200  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.tim...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S563.json:\n  Line 1: {\"id\":\"S563\",\"summaryText\":\"[SUMMARY S563] 50.3 KB | code | 1099 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\tests\\\\test_embeddings_adversarial.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Adversarial tests for embedding service single-input overflow fallback.\\n3: Tests attack vectors: malformed overflow errors, tiny/empty split boundaries,\\n→ Use /swarm retrieve S563 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\tests\\\\test_embeddings_adversarial.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Adversarial tests for embedding service single-input overflow fallback.\\n3: Tests attack vectors: malformed overflow errors, tiny/empty split boundaries,\\n4: repeated overflow recursion pressure, unexpected response shapes.\\n5: \\n6: CONSTRAINT: Testing only - no code edits.\\n7: \\\"\\\"\\\"\\n8: import sys\\n9: import os\\n10: \\n11: # Add parent directory to path for imports\\n12: sys.path.insert(0, os.path.join(os.path.dirname(__file__), '..'))\\n13: \\n14: # Stub missing optional dependencies\\n15: try:\\n16:     import lancedb\\n17: except ImportError:\\n18:     import types\\n19:     sys.modules['lancedb'] = types.ModuleType('lancedb')\\n20: \\n21: try:\\n22:     import pyarrow\\n23: except ImportError:\\n24:     import types\\n25:     sys.modules['pyarrow'] = types.ModuleType('pyarrow')\\n26: \\n27: import pytest\\n28: from unittest.mock import AsyncMock, patch, MagicMock\\n29: from httpx import HTTPError\\n30: \\n31: from app.services.embeddings import EmbeddingService, EmbeddingError\\n32: \\n33: \\n34: # ==============================================================================\\n35: # ATTACK VECTOR 1: MALFORMED OVERFLOW ERRORS\\n36: # ==============================================================================\\n37: \\n38: class TestMalformedOverflowErrors:\\n39:     \\\"\\\"\\\"Tests for malformed, partial, or ambiguous overflow error patterns.\\\"\\\"\\\"\\n40: \\n41:     @pytest.fixture(autouse=True)\\n42:     def setup(self):\\n43:         \\\"\\\"\\\"Set up test fixtures.\\\"\\...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S562.json:\n  Line 1: {\"id\":\"S562\",\"summaryText\":\"[SUMMARY S562] 30.3 KB | code | 678 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S562 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 200  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.tim...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S561.json:\n  Line 1: {\"id\":\"S561\",\"summaryText\":\"[SUMMARY S561] 50.4 KB | code | 1105 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\tests\\\\test_embeddings_adversarial.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Adversarial tests for embedding service single-input overflow fallback.\\n3: Tests attack vectors: malformed overflow errors, tiny/empty split boundaries,\\n→ Use /swarm retrieve S561 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\tests\\\\test_embeddings_adversarial.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Adversarial tests for embedding service single-input overflow fallback.\\n3: Tests attack vectors: malformed overflow errors, tiny/empty split boundaries,\\n4: repeated overflow recursion pressure, unexpected response shapes.\\n5: \\n6: CONSTRAINT: Testing only - no code edits.\\n7: \\\"\\\"\\\"\\n8: import sys\\n9: import os\\n10: \\n11: # Add parent directory to path for imports\\n12: sys.path.insert(0, os.path.join(os.path.dirname(__file__), '..'))\\n13: \\n14: # Stub missing optional dependencies\\n15: try:\\n16:     import lancedb\\n17: except ImportError:\\n18:     import types\\n19:     sys.modules['lancedb'] = types.ModuleType('lancedb')\\n20: \\n21: try:\\n22:     import pyarrow\\n23: except ImportError:\\n24:     import types\\n25:     sys.modules['pyarrow'] = types.ModuleType('pyarrow')\\n26: \\n27: import pytest\\n28: from unittest.mock import AsyncMock, patch, MagicMock\\n29: from httpx import HTTPError\\n30: \\n31: from app.services.embeddings import EmbeddingService, EmbeddingError\\n32: \\n33: \\n34: # ==============================================================================\\n35: # ATTACK VECTOR 1: MALFORMED OVERFLOW ERRORS\\n36: # ==============================================================================\\n37: \\n38: class TestMalformedOverflowErrors:\\n39:     \\\"\\\"\\\"Tests for malformed, partial, or ambiguous overflow error patterns.\\\"\\\"\\\"\\n40: \\n41:     @pytest.fixture(autouse=True)\\n42:     def setup(self):\\n43:         \\\"\\\"\\\"Set up test fixtures.\\\"\\...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S560.json:\n  Line 1: {\"id\":\"S560\",\"summaryText\":\"[SUMMARY S560] 30.3 KB | code | 678 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S560 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 200  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.tim...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S559.json:\n  Line 1: {\"id\":\"S559\",\"summaryText\":\"[SUMMARY S559] 30.3 KB | code | 678 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S559 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 200  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.tim...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S550.json:\n  Line 1: {\"id\":\"S550\",\"summaryText\":\"[SUMMARY S550] 27.0 KB | code | 674 lines\\n\\\"\\\"\\\"\\nDual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n\\\"\\\"\\\"\\nimport asyncio\\nimport httpx\\n→ Use /swarm retrieve S550 for full content\",\"fullOutput\":\"\\\"\\\"\\\"\\nDual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n\\\"\\\"\\\"\\nimport asyncio\\nimport httpx\\nimport logging\\nfrom typing import List\\nfrom urllib.parse import urlparse\\nfrom app.config import settings\\n\\nlogger = logging.getLogger(__name__)\\n\\n\\nclass EmbeddingError(Exception):\\n    \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n    pass\\n\\n\\nclass EmbeddingService:\\n    \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n    \\n    # Hard caps for input validation\\n    MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n    MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n    MIN_SPLIT_CHARS = 200  # Minimum text length to attempt single-text splitting\\n\\n    def __init__(self):\\n        \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n        base_url = settings.ollama_embedding_url\\n\\n        # Validate base_url\\n        if not base_url:\\n            raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n        if not base_url.startswith(('http://', 'https://')):\\n            raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n\\n        # Detect provider mode based on URL path\\n        self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n        self.timeout = 60.0\\n        \\n        # Read embedding prefixes from settings\\n        self.embedding_doc_prefix = settings.embedding_doc_prefix\\n        self.embedding_query_prefix = settings.embedding_query_prefix\\n        \\n        # Auto-apply Qwen3 instruction prefixes for better retrieval quality\\n        # With llama.cpp -ub 8192, w...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S549.json:\n  Line 1: {\"id\":\"S549\",\"summaryText\":\"[SUMMARY S549] 27.0 KB | code | 674 lines\\n\\\"\\\"\\\"\\nDual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n\\\"\\\"\\\"\\nimport asyncio\\nimport httpx\\n→ Use /swarm retrieve S549 for full content\",\"fullOutput\":\"\\\"\\\"\\\"\\nDual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n\\\"\\\"\\\"\\nimport asyncio\\nimport httpx\\nimport logging\\nfrom typing import List\\nfrom urllib.parse import urlparse\\nfrom app.config import settings\\n\\nlogger = logging.getLogger(__name__)\\n\\n\\nclass EmbeddingError(Exception):\\n    \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n    pass\\n\\n\\nclass EmbeddingService:\\n    \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n    \\n    # Hard caps for input validation\\n    MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n    MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n    MIN_SPLIT_CHARS = 200  # Minimum text length to attempt single-text splitting\\n\\n    def __init__(self):\\n        \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n        base_url = settings.ollama_embedding_url\\n\\n        # Validate base_url\\n        if not base_url:\\n            raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n        if not base_url.startswith(('http://', 'https://')):\\n            raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n\\n        # Detect provider mode based on URL path\\n        self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n        self.timeout = 60.0\\n        \\n        # Read embedding prefixes from settings\\n        self.embedding_doc_prefix = settings.embedding_doc_prefix\\n        self.embedding_query_prefix = settings.embedding_query_prefix\\n        \\n        # Auto-apply Qwen3 instruction prefixes for better retrieval quality\\n        # With llama.cpp -ub 8192, w...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S548.json:\n  Line 1: {\"id\":\"S548\",\"summaryText\":\"[SUMMARY S548] 30.3 KB | code | 678 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S548 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 200  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.tim...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S547.json:\n  Line 1: {\"id\":\"S547\",\"summaryText\":\"[SUMMARY S547] 30.3 KB | code | 678 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S547 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 200  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.tim...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S546.json:\n  Line 1: {\"id\":\"S546\",\"summaryText\":\"[SUMMARY S546] 30.3 KB | code | 678 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S546 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 200  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.tim...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S545.json:\n  Line 1: {\"id\":\"S545\",\"summaryText\":\"[SUMMARY S545] 30.3 KB | code | 678 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S545 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 200  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.tim...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S544.json:\n  Line 1: {\"id\":\"S544\",\"summaryText\":\"[SUMMARY S544] 30.3 KB | code | 678 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S544 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 200  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.tim...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S543.json:\n  Line 1: {\"id\":\"S543\",\"summaryText\":\"[SUMMARY S543] 30.3 KB | code | 678 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S543 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 200  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.tim...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S542.json:\n  Line 1: {\"id\":\"S542\",\"summaryText\":\"[SUMMARY S542] 30.3 KB | code | 678 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S542 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 200  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.tim...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S538.json:\n  Line 1: {\"id\":\"S538\",\"summaryText\":\"[SUMMARY S538] 30.3 KB | code | 678 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S538 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 200  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.tim...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S536.json:\n  Line 1: {\"id\":\"S536\",\"summaryText\":\"[SUMMARY S536] 30.3 KB | code | 678 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S536 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 200  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.tim...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S504.json:\n  Line 1: {\"id\":\"S504\",\"summaryText\":\"[SUMMARY S504] 28.6 KB | code | 646 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S504 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 100  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.tim...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S502.json:\n  Line 1: {\"id\":\"S502\",\"summaryText\":\"[SUMMARY S502] 28.6 KB | code | 646 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S502 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 100  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.tim...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S500.json:\n  Line 1: {\"id\":\"S500\",\"summaryText\":\"[SUMMARY S500] 28.6 KB | code | 646 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S500 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 100  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.tim...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S488.json:\n  Line 1: {\"id\":\"S488\",\"summaryText\":\"[SUMMARY S488] 25.4 KB | code | 642 lines\\n\\\"\\\"\\\"\\nDual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n\\\"\\\"\\\"\\nimport asyncio\\nimport httpx\\n→ Use /swarm retrieve S488 for full content\",\"fullOutput\":\"\\\"\\\"\\\"\\nDual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n\\\"\\\"\\\"\\nimport asyncio\\nimport httpx\\nimport logging\\nfrom typing import List\\nfrom urllib.parse import urlparse\\nfrom app.config import settings\\n\\nlogger = logging.getLogger(__name__)\\n\\n\\nclass EmbeddingError(Exception):\\n    \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n    pass\\n\\n\\nclass EmbeddingService:\\n    \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n    \\n    # Hard caps for input validation\\n    MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n    MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n    MIN_SPLIT_CHARS = 100  # Minimum text length to attempt single-text splitting\\n\\n    def __init__(self):\\n        \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n        base_url = settings.ollama_embedding_url\\n\\n        # Validate base_url\\n        if not base_url:\\n            raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n        if not base_url.startswith(('http://', 'https://')):\\n            raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n\\n        # Detect provider mode based on URL path\\n        self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n        self.timeout = 60.0\\n        \\n        # Read embedding prefixes from settings\\n        self.embedding_doc_prefix = settings.embedding_doc_prefix\\n        self.embedding_query_prefix = settings.embedding_query_prefix\\n        \\n        # Auto-apply Qwen3 instruction prefixes for better retrieval quality\\n        # With llama.cpp -ub 8192, w...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S487.json:\n  Line 1: {\"id\":\"S487\",\"summaryText\":\"[SUMMARY S487] 28.6 KB | code | 646 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S487 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 100  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.tim...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S486.json:\n  Line 1: {\"id\":\"S486\",\"summaryText\":\"[SUMMARY S486] 28.6 KB | code | 646 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S486 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 100  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.tim...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S484.json:\n  Line 1: {\"id\":\"S484\",\"summaryText\":\"[SUMMARY S484] 28.6 KB | code | 646 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n→ Use /swarm retrieve S484 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\services\\\\embeddings.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Dual-provider embedding client service supporting Ollama and OpenAI-compatible APIs.\\n3: \\\"\\\"\\\"\\n4: import asyncio\\n5: import httpx\\n6: import logging\\n7: from typing import List\\n8: from urllib.parse import urlparse\\n9: from app.config import settings\\n10: \\n11: logger = logging.getLogger(__name__)\\n12: \\n13: \\n14: class EmbeddingError(Exception):\\n15:     \\\"\\\"\\\"Exception raised for embedding service errors.\\\"\\\"\\\"\\n16:     pass\\n17: \\n18: \\n19: class EmbeddingService:\\n20:     \\\"\\\"\\\"Service for generating text embeddings via Ollama or OpenAI-compatible APIs.\\\"\\\"\\\"\\n21:     \\n22:     # Hard caps for input validation\\n23:     MAX_BATCH_SIZE = 512  # Maximum number of texts per batch call\\n24:     MAX_TEXT_LENGTH = 8192  # Maximum characters per text (derived from chunk_size_chars=8192)\\n25:     MIN_SPLIT_CHARS = 100  # Minimum text length to attempt single-text splitting\\n26: \\n27:     def __init__(self):\\n28:         \\\"\\\"\\\"Initialize the embedding service with HTTP client and provider detection.\\\"\\\"\\\"\\n29:         base_url = settings.ollama_embedding_url\\n30: \\n31:         # Validate base_url\\n32:         if not base_url:\\n33:             raise EmbeddingError(\\\"Embedding service is not configured\\\")\\n34:         if not base_url.startswith(('http://', 'https://')):\\n35:             raise EmbeddingError(\\\"Invalid embedding URL configuration\\\")\\n36: \\n37:         # Detect provider mode based on URL path\\n38:         self.provider_mode, self.embeddings_url = self._detect_provider_mode(base_url)\\n39:         self.tim...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S26.json:\n  Line 1: {\"id\":\"S26\",\"summaryText\":\"[SUMMARY S26] 25.8 KB | code | 623 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n→ Use /swarm retrieve S26 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n4: Provides endpoints for listing documents, uploading files, scanning directories,\\n5: and managing document processing status.\\n6: \\\"\\\"\\\"\\n7: import asyncio\\n8: import hashlib\\n9: import hmac\\n10: import logging\\n11: import os\\n12: import re\\n13: import sqlite3\\n14: from pathlib import Path\\n15: from typing import Any, Dict, List, Optional\\n16: \\n17: import aiofiles\\n18: from fastapi import APIRouter, Depends, HTTPException, Request, UploadFile, File, Query\\n19: from fastapi.exceptions import RequestValidationError\\n20: from pydantic import BaseModel, ConfigDict, Field\\n21: \\n22: from app.config import settings, Settings\\n23: from app.services.document_processor import DocumentProcessor, DocumentProcessingError, DuplicateFileError\\n24: from app.services.vector_store import VectorStore\\n25: from app.services.embeddings import EmbeddingService\\n26: from app.services.secret_manager import SecretManager\\n27: from app.models.database import SQLiteConnectionPool\\n28: from app.api.deps import get_secret_manager, get_background_processor, get_vector_store, get_embedding_service, get_settings, get_db, get_db_pool\\n29: from app.security import csrf_protect, require_scope, require_auth\\n30: from app.limiter import limiter\\n31: from app.services.background_tasks import BackgroundProcessor\\n32: \\n33: \\n34: def secure_filename(filename: str) -> str:\\n35:     \\\"\\\"\\\"\\n36:     Sanitize a filename to prevent security issues.\\n37:     \\n38:     - Strips paths using os.path.basename\\n39:     - Remove...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S25.json:\n  Line 1: {\"id\":\"S25\",\"summaryText\":\"[SUMMARY S25] 25.8 KB | code | 623 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n→ Use /swarm retrieve S25 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n4: Provides endpoints for listing documents, uploading files, scanning directories,\\n5: and managing document processing status.\\n6: \\\"\\\"\\\"\\n7: import asyncio\\n8: import hashlib\\n9: import hmac\\n10: import logging\\n11: import os\\n12: import re\\n13: import sqlite3\\n14: from pathlib import Path\\n15: from typing import Any, Dict, List, Optional\\n16: \\n17: import aiofiles\\n18: from fastapi import APIRouter, Depends, HTTPException, Request, UploadFile, File, Query\\n19: from fastapi.exceptions import RequestValidationError\\n20: from pydantic import BaseModel, ConfigDict, Field\\n21: \\n22: from app.config import settings, Settings\\n23: from app.services.document_processor import DocumentProcessor, DocumentProcessingError, DuplicateFileError\\n24: from app.services.vector_store import VectorStore\\n25: from app.services.embeddings import EmbeddingService\\n26: from app.services.secret_manager import SecretManager\\n27: from app.models.database import SQLiteConnectionPool\\n28: from app.api.deps import get_secret_manager, get_background_processor, get_vector_store, get_embedding_service, get_settings, get_db, get_db_pool\\n29: from app.security import csrf_protect, require_scope, require_auth\\n30: from app.limiter import limiter\\n31: from app.services.background_tasks import BackgroundProcessor\\n32: \\n33: \\n34: def secure_filename(filename: str) -> str:\\n35:     \\\"\\\"\\\"\\n36:     Sanitize a filename to prevent security issues.\\n37:     \\n38:     - Strips paths using os.path.basename\\n39:     - Remove...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S24.json:\n  Line 1: {\"id\":\"S24\",\"summaryText\":\"[SUMMARY S24] 25.8 KB | code | 623 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n→ Use /swarm retrieve S24 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n4: Provides endpoints for listing documents, uploading files, scanning directories,\\n5: and managing document processing status.\\n6: \\\"\\\"\\\"\\n7: import asyncio\\n8: import hashlib\\n9: import hmac\\n10: import logging\\n11: import os\\n12: import re\\n13: import sqlite3\\n14: from pathlib import Path\\n15: from typing import Any, Dict, List, Optional\\n16: \\n17: import aiofiles\\n18: from fastapi import APIRouter, Depends, HTTPException, Request, UploadFile, File, Query\\n19: from fastapi.exceptions import RequestValidationError\\n20: from pydantic import BaseModel, ConfigDict, Field\\n21: \\n22: from app.config import settings, Settings\\n23: from app.services.document_processor import DocumentProcessor, DocumentProcessingError, DuplicateFileError\\n24: from app.services.vector_store import VectorStore\\n25: from app.services.embeddings import EmbeddingService\\n26: from app.services.secret_manager import SecretManager\\n27: from app.models.database import SQLiteConnectionPool\\n28: from app.api.deps import get_secret_manager, get_background_processor, get_vector_store, get_embedding_service, get_settings, get_db, get_db_pool\\n29: from app.security import csrf_protect, require_scope, require_auth\\n30: from app.limiter import limiter\\n31: from app.services.background_tasks import BackgroundProcessor\\n32: \\n33: \\n34: def secure_filename(filename: str) -> str:\\n35:     \\\"\\\"\\\"\\n36:     Sanitize a filename to prevent security issues.\\n37:     \\n38:     - Strips paths using os.path.basename\\n39:     - Remove...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S28.json:\n  Line 1: {\"id\":\"S28\",\"summaryText\":\"[SUMMARY S28] 27.4 KB | code | 685 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\tests\\\\test_api_routes.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Backend API route tests using unittest and FastAPI TestClient.\\n3: \\n→ Use /swarm retrieve S28 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\tests\\\\test_api_routes.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Backend API route tests using unittest and FastAPI TestClient.\\n3: \\n4: Tests cover health, settings, memories, documents, and chat endpoints.\\n5: All external services (LLM, vector store) are mocked for deterministic tests.\\n6: \\\"\\\"\\\"\\n7: \\n8: import json\\n9: import os\\n10: import sqlite3\\n11: import sys\\n12: import tempfile\\n13: import unittest\\n14: from pathlib import Path\\n15: from unittest.mock import AsyncMock, MagicMock, patch\\n16: \\n17: # Add parent directory to path for imports\\n18: sys.path.insert(0, os.path.join(os.path.dirname(__file__), '..'))\\n19: \\n20: # Stub missing optional dependencies\\n21: try:\\n22:     import lancedb\\n23: except ImportError:\\n24:     import types\\n25:     sys.modules['lancedb'] = types.ModuleType('lancedb')\\n26: \\n27: try:\\n28:     import pyarrow\\n29: except ImportError:\\n30:     import types\\n31:     sys.modules['pyarrow'] = types.ModuleType('pyarrow')\\n32: \\n33: try:\\n34:     from unstructured.partition.auto import partition\\n35: except ImportError:\\n36:     import types\\n37:     _unstructured = types.ModuleType('unstructured')\\n38:     _unstructured.__path__ = []\\n39:     _unstructured.partition = types.ModuleType('unstructured.partition')\\n40:     _unstructured.partition.__path__ = []\\n41:     _unstructured.partition.auto = types.ModuleType('unstructured.partition.auto')\\n42:     _unstructured.partition.auto.partition = lambda *args, **kwargs: []\\n43:     _unstructured.chunking = types.ModuleType('unstructured.chunking')\\n44:     _unstructured.chunking.__path__ = []\\n45:     _unstructured.chunking.title = ty...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S27.json:\n  Line 1: {\"id\":\"S27\",\"summaryText\":\"[SUMMARY S27] 27.4 KB | code | 685 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\tests\\\\test_api_routes.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Backend API route tests using unittest and FastAPI TestClient.\\n3: \\n→ Use /swarm retrieve S27 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\tests\\\\test_api_routes.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Backend API route tests using unittest and FastAPI TestClient.\\n3: \\n4: Tests cover health, settings, memories, documents, and chat endpoints.\\n5: All external services (LLM, vector store) are mocked for deterministic tests.\\n6: \\\"\\\"\\\"\\n7: \\n8: import json\\n9: import os\\n10: import sqlite3\\n11: import sys\\n12: import tempfile\\n13: import unittest\\n14: from pathlib import Path\\n15: from unittest.mock import AsyncMock, MagicMock, patch\\n16: \\n17: # Add parent directory to path for imports\\n18: sys.path.insert(0, os.path.join(os.path.dirname(__file__), '..'))\\n19: \\n20: # Stub missing optional dependencies\\n21: try:\\n22:     import lancedb\\n23: except ImportError:\\n24:     import types\\n25:     sys.modules['lancedb'] = types.ModuleType('lancedb')\\n26: \\n27: try:\\n28:     import pyarrow\\n29: except ImportError:\\n30:     import types\\n31:     sys.modules['pyarrow'] = types.ModuleType('pyarrow')\\n32: \\n33: try:\\n34:     from unstructured.partition.auto import partition\\n35: except ImportError:\\n36:     import types\\n37:     _unstructured = types.ModuleType('unstructured')\\n38:     _unstructured.__path__ = []\\n39:     _unstructured.partition = types.ModuleType('unstructured.partition')\\n40:     _unstructured.partition.__path__ = []\\n41:     _unstructured.partition.auto = types.ModuleType('unstructured.partition.auto')\\n42:     _unstructured.partition.auto.partition = lambda *args, **kwargs: []\\n43:     _unstructured.chunking = types.ModuleType('unstructured.chunking')\\n44:     _unstructured.chunking.__path__ = []\\n45:     _unstructured.chunking.title = ty...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S30.json:\n  Line 1: {\"id\":\"S30\",\"summaryText\":\"[SUMMARY S30] 50.3 KB | code | 1029 lines\\n============================= test session starts =============================\\r\\nplatform win32 -- Python 3.13.1, pytest-9.0.2, pluggy-1.6.0 -- C:\\\\Program Files\\\\Python313\\\\python.exe\\r\\ncachedir: .pytest_cache\\r\\nrootdir: C:\\\\opencode\\\\RAGAPPv2\\r\\nplugins: asyncio-1.3.0, cov-7.0.0, mock-3.15.1, anyio-4.12.1\\r\\n→ Use /swarm retrieve S30 for full content\",\"fullOutput\":\"============================= test session starts =============================\\r\\nplatform win32 -- Python 3.13.1, pytest-9.0.2, pluggy-1.6.0 -- C:\\\\Program Files\\\\Python313\\\\python.exe\\r\\ncachedir: .pytest_cache\\r\\nrootdir: C:\\\\opencode\\\\RAGAPPv2\\r\\nplugins: asyncio-1.3.0, cov-7.0.0, mock-3.15.1, anyio-4.12.1\\r\\nasyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function\\r\\ncollecting ... collected 1 item\\r\\n\\r\\n..\\\\backend\\\\tests\\\\test_embeddings.py::TestEmbeddingBatching::test_ollama_mode_overflow_handling FAILED [100%]\\r\\n\\r\\n================================== FAILURES ===================================\\r\\n__________ TestEmbeddingBatching.test_ollama_mode_overflow_handling ___________\\r\\n\\r\\nself = <app.services.embeddings.EmbeddingService object at 0x00000244D914DD30>\\r\\nclient = <MagicMock name='AsyncClient().__aenter__()' id='2494723055232'>\\r\\ntexts = ['text1', 'text2'], max_retries = 3, min_sub_size = 10\\r\\noriginal_batch_size = 2\\r\\n\\r\\n    async def _embed_batch_with_retry(self, client: httpx.AsyncClient, texts: List[str],\\r\\n                                      max_retries: int, min_sub_size: int,\\r\\n                                      original_batch_size: int | None = None) -> List[List[float]]:\\r\\n        \\\"\\\"\\\"\\r\\n        Internal method that handles the retry logic for adaptive batching.\\r\\n    \\r\\n        Args:\\r\\n            client: HTTP client for making requests\\r\\n            texts: List of texts to embed\\r\\n            max_retries: Maximum num...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S29.json:\n  Line 1: {\"id\":\"S29\",\"summaryText\":\"[SUMMARY S29] 50.3 KB | code | 1069 lines\\n============================= test session starts =============================\\r\\nplatform win32 -- Python 3.13.1, pytest-9.0.2, pluggy-1.6.0 -- C:\\\\Program Files\\\\Python313\\\\python.exe\\r\\ncachedir: .pytest_cache\\r\\nrootdir: C:\\\\opencode\\\\RAGAPPv2\\\\backend\\r\\nplugins: asyncio-1.3.0, cov-7.0.0, mock-3.15.1, anyio-4.12.1\\r\\n→ Use /swarm retrieve S29 for full content\",\"fullOutput\":\"============================= test session starts =============================\\r\\nplatform win32 -- Python 3.13.1, pytest-9.0.2, pluggy-1.6.0 -- C:\\\\Program Files\\\\Python313\\\\python.exe\\r\\ncachedir: .pytest_cache\\r\\nrootdir: C:\\\\opencode\\\\RAGAPPv2\\\\backend\\r\\nplugins: asyncio-1.3.0, cov-7.0.0, mock-3.15.1, anyio-4.12.1\\r\\nasyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function\\r\\ncollecting ... collected 12 items\\r\\n\\r\\ntests/test_embeddings.py::TestEmbeddingBatching::test_multi_item_batch_overflow_split_and_retry FAILED [  8%]\\r\\ntests/test_embeddings.py::TestEmbeddingBatching::test_single_item_batch_overflow_raises_actionable_error PASSED [ 16%]\\r\\ntests/test_embeddings.py::TestEmbeddingBatching::test_batch_preserves_order_after_split PASSED [ 25%]\\r\\ntests/test_embeddings.py::TestEmbeddingBatching::test_no_overflow_returns_immediately PASSED [ 33%]\\r\\ntests/test_embeddings.py::TestEmbeddingBatching::test_non_overflow_error_raises_immediately PASSED [ 41%]\\r\\ntests/test_embeddings.py::TestEmbeddingBatching::test_ollama_mode_overflow_handling FAILED [ 50%]\\r\\ntests/test_embeddings.py::TestIsTokenOverflowError::test_llama_cpp_overflow_pattern PASSED [ 58%]\\r\\ntests/test_embeddings.py::TestIsTokenOverflowError::test_openai_overflow_pattern PASSED [ 66%]\\r\\ntests/test_embeddings.py::TestIsTokenOverflowError::test_token_limit_exceeded_pattern PASSED [ 75%]\\r\\ntests/test_embeddings.py::TestIsTokenOverflowError::test_batch_size_too_small_pattern PASSED [ 83%]\\r...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S55.json:\n  Line 1: {\"id\":\"S55\",\"summaryText\":\"[SUMMARY S55] 25.8 KB | code | 623 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n→ Use /swarm retrieve S55 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n4: Provides endpoints for listing documents, uploading files, scanning directories,\\n5: and managing document processing status.\\n6: \\\"\\\"\\\"\\n7: import asyncio\\n8: import hashlib\\n9: import hmac\\n10: import logging\\n11: import os\\n12: import re\\n13: import sqlite3\\n14: from pathlib import Path\\n15: from typing import Any, Dict, List, Optional\\n16: \\n17: import aiofiles\\n18: from fastapi import APIRouter, Depends, HTTPException, Request, UploadFile, File, Query\\n19: from fastapi.exceptions import RequestValidationError\\n20: from pydantic import BaseModel, ConfigDict, Field\\n21: \\n22: from app.config import settings, Settings\\n23: from app.services.document_processor import DocumentProcessor, DocumentProcessingError, DuplicateFileError\\n24: from app.services.vector_store import VectorStore\\n25: from app.services.embeddings import EmbeddingService\\n26: from app.services.secret_manager import SecretManager\\n27: from app.models.database import SQLiteConnectionPool\\n28: from app.api.deps import get_secret_manager, get_background_processor, get_vector_store, get_embedding_service, get_settings, get_db, get_db_pool\\n29: from app.security import csrf_protect, require_scope, require_auth\\n30: from app.limiter import limiter\\n31: from app.services.background_tasks import BackgroundProcessor\\n32: \\n33: \\n34: def secure_filename(filename: str) -> str:\\n35:     \\\"\\\"\\\"\\n36:     Sanitize a filename to prevent security issues.\\n37:     \\n38:     - Strips paths using os.path.basename\\n39:     - Remove...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S54.json:\n  Line 1: {\"id\":\"S54\",\"summaryText\":\"[SUMMARY S54] 26.6 KB | code | 577 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\SettingsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect } from \\\"react\\\";\\n2: import { toast } from \\\"sonner\\\";\\n3: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n→ Use /swarm retrieve S54 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\frontend\\\\src\\\\pages\\\\SettingsPage.tsx</path>\\n<type>file</type>\\n<content>1: import { useState, useEffect } from \\\"react\\\";\\n2: import { toast } from \\\"sonner\\\";\\n3: import { Card, CardContent, CardDescription, CardHeader, CardTitle } from \\\"@/components/ui/card\\\";\\n4: import { Button } from \\\"@/components/ui/button\\\";\\n5: import { Input } from \\\"@/components/ui/input\\\";\\n6: import { Tabs, TabsContent, TabsList, TabsTrigger } from \\\"@/components/ui/tabs\\\";\\n7: import { Badge } from \\\"@/components/ui/badge\\\";\\n8: import { Skeleton } from \\\"@/components/ui/skeleton\\\";\\n9: import { AlertCircle, Loader2 } from \\\"lucide-react\\\";\\n10: import { getSettings, updateSettings, testConnections, type ConnectionTestResult } from \\\"@/lib/api\\\";\\n11: import { useSettingsStore } from \\\"@/stores/useSettingsStore\\\";\\n12: import { ConnectionStatusBadges } from \\\"@/components/shared/ConnectionStatusBadges\\\";\\n13: import type { HealthStatus } from \\\"@/types/health\\\";\\n14: import { useHealthCheck } from \\\"@/hooks/useHealthCheck\\\";\\n15: \\n16: // Internal component that renders the settings form\\n17: function SettingsPageContent() {\\n18:   const {\\n19:     settings,\\n20:     formData,\\n21:     loading,\\n22:     saving,\\n23:     error,\\n24:     errors,\\n25:     setSettings,\\n26:     initializeForm,\\n27:     setLoading,\\n28:     setSaving,\\n29:     setError,\\n30:     updateFormField,\\n31:     validateForm,\\n32:     hasChanges,\\n33:   } = useSettingsStore();\\n34: \\n35:   const [apiKey, setApiKey] = useState(() => {\\n36:     try {\\n37:       retur...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S53.json:\n  Line 1: {\"id\":\"S53\",\"summaryText\":\"[SUMMARY S53] 25.8 KB | code | 623 lines\\n<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n→ Use /swarm retrieve S53 for full content\",\"fullOutput\":\"<path>C:\\\\opencode\\\\RAGAPPv2\\\\backend\\\\app\\\\api\\\\routes\\\\documents.py</path>\\n<type>file</type>\\n<content>1: \\\"\\\"\\\"\\n2: Documents API routes for file management and processing.\\n3: \\n4: Provides endpoints for listing documents, uploading files, scanning directories,\\n5: and managing document processing status.\\n6: \\\"\\\"\\\"\\n7: import asyncio\\n8: import hashlib\\n9: import hmac\\n10: import logging\\n11: import os\\n12: import re\\n13: import sqlite3\\n14: from pathlib import Path\\n15: from typing import Any, Dict, List, Optional\\n16: \\n17: import aiofiles\\n18: from fastapi import APIRouter, Depends, HTTPException, Request, UploadFile, File, Query\\n19: from fastapi.exceptions import RequestValidationError\\n20: from pydantic import BaseModel, ConfigDict, Field\\n21: \\n22: from app.config import settings, Settings\\n23: from app.services.document_processor import DocumentProcessor, DocumentProcessingError, DuplicateFileError\\n24: from app.services.vector_store import VectorStore\\n25: from app.services.embeddings import EmbeddingService\\n26: from app.services.secret_manager import SecretManager\\n27: from app.models.database import SQLiteConnectionPool\\n28: from app.api.deps import get_secret_manager, get_background_processor, get_vector_store, get_embedding_service, get_settings, get_db, get_db_pool\\n29: from app.security import csrf_protect, require_scope, require_auth\\n30: from app.limiter import limiter\\n31: from app.services.background_tasks import BackgroundProcessor\\n32: \\n33: \\n34: def secure_filename(filename: str) -> str:\\n35:     \\\"\\\"\\\"\\n36:     Sanitize a filename to prevent security issues.\\n37:     \\n38:     - Strips paths using os.path.basename\\n39:     - Remove...\n\nC:\\opencode\\RAGAPPv2\\.swarm\\summaries\\S89.json:\n  Line 1: {\"id\":\"S89\",\"summaryText\":\"[SUMMARY S89] 50.3 KB | code | 996 lines\\nchunk_size_chars: 2000\\r\\nchunk_size: 512\\r\\nValidator info: SchemaValidator(title=\\\"Settings\\\", validator=Model(\\r\\n    ModelValidator {\\r\\n        revalidate: Never,\\r\\n→ Use /swarm retrieve S89 for full content\",\"fullOutput\":\"chunk_size_chars: 2000\\r\\nchunk_size: 512\\r\\nValidator info: SchemaValidator(title=\\\"Settings\\\", validator=Model(\\r\\n    ModelValidator {\\r\\n        revalidate: Never,\\r\\n        validator: ModelFields(\\r\\n            ModelFieldsValidator {\\r\\n                fields: [\\r\\n                    Field {\\r\\n                        name: \\\"port\\\",\\r\\n                        lookup_key_collection: LookupKeyCollection {\\r\\n                            by_name: Simple(\\r\\n                                LookupPath {\\r\\n                                    first_item: PathItemString {\\r\\n                                        key: \\\"port\\\",\\r\\n                                        py_key: Py(\\r\\n                                            0x000001bed3f7b480,\\r\\n                                        ),\\r\\n                                    },\\r\\n                                    rest: [],\\r\\n                                },\\r\\n                            ),\\r\\n                            by_alias: None,\\r\\n                            by_alias_then_name: None,\\r\\n                        },\\r\\n                        name_py: Py(\\r\\n                            0x000001bed340d050,\\r\\n                        ),\\r\\n                        validator: WithDefault(\\r\\n                            WithDefaultValidator {\\r\\n                                default: Default(\\r\\n                                    Py(\\r\\n                                        0x000001bed33bd530,\\r\\n                                    ),\\r\\n                                ),\\r\\n                                on_error: Raise,\\r\\n                                validator: Int(\\r\\n                            ...\n\n(Results truncated: showing 100 of 152 matches (52 hidden). Consider using a more specific path or pattern.)","timestamp":1771961290720,"originalBytes":169298}